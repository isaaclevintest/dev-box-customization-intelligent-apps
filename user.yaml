$schema: "1.0"
name: "devbox-customization"
tasks:
  - name: default-devcenter-catalog/powershell
    parameters:
      command: |
        $DSCFile = "c:\src\dev-box-customization-intelligent-apps\winget-configurations\user-personalizations.dsc.yaml"
        if (Test-Path -Path $DSCFile) 
        {
          $content = Get-Content -Path $DSCFile
          $content = $content -replace '{GIT-USERNAME}', 'Isaac Levin'
          $content = $content -replace '{GIT-EMAIL}', '8878502+isaacrlevin@users.noreply.github.com'
          $content | Set-Content -Path $DSCFile
        }        
  - name: winget
    parameters:
      configurationFile: 'c:\src\dev-box-customization-intelligent-apps\winget-configurations\user-personalizations.dsc.yaml'
      runAsUser: true
